# 명령어 시스템 개선 요약

## 1. 작업 개요

APE 확장 프로그램의 명령어 시스템을 전면 개선하여 직관적이고 확장 가능한 명령어 기반 인터페이스를 구현했습니다. 특히 도메인 기반 명령어 시스템을 도입해 각 도메인별로 특화된 명령어를 제공할 수 있게 되었습니다.

## 2. 주요 변경사항

### 2.1 이중 접두사 시스템 (`/`, `@`)

- **슬래시 명령어(`/`)**: 내부 시스템 기능 (설정, UI 제어, 채팅 관리 등)
- **앳 명령어(`@`)**: 외부 시스템 연동 및 도메인별 특화 기능 (Git, Jira, Pocket 등)

### 2.2 도메인 기반 명령어 구조

명령어 구조: `@<도메인>:<명령어>[:<하위명령어>] [인자...] [플래그...]`

도메인 예시:
- `git`: Git 관련 명령어
- `jira`: Jira 이슈 관리 명령어
- `pocket`: Pocket API 연동 명령어
- `doc`: 문서 관리 및 검색 명령어
- `rules`: 프롬프트 규칙 관리 명령어

### 2.3 강화된 명령어 레지스트리

- 도메인별 명령어 등록 및 관리
- 컨텍스트 기반 명령어 제안 기능
- 명령어 유사도 기반 오타 수정 및 제안 기능

### 2.4 향상된 명령어 실행기

- 비동기 명령어 실행 지원
- 명령어 취소 기능
- 실행 이력 관리
- 도메인 라우팅 기능

## 3. 구현 파일 및 서비스

### 3.1 타입 정의

- `src/types/CommandTypes.ts`: 명령어 시스템의 기본 타입 및 인터페이스 정의

### 3.2 핵심 서비스

- `src/core/command/CommandParserService.ts`: 명령어 파싱 및 분석
- `src/core/command/CommandRegistryService.ts`: 명령어 등록 및 관리
- `src/core/command/CommandExecutorService.ts`: 명령어 실행 및 결과 처리
- `src/core/command/CommandService.ts`: 통합 명령어 서비스

### 3.3 문서화

- `docs/COMMAND_SYSTEM_IMPLEMENTATION.md`: 명령어 시스템 구현 상세 가이드
- `docs/COMMAND_SYSTEM_INTEGRATION_GUIDE.md`: 다른 서비스와의 통합 가이드
- `docs/COMMAND_SYSTEM_EXAMPLE.md`: 도메인 기반 명령어 사용 예제

## 4. 주요 기능 설명

### 4.1 명령어 파서 (CommandParserService)

- 입력 문자열에서 접두사, 도메인, 명령어, 인자, 플래그 추출
- 명령어 유효성 검사 및 오류 메시지 생성
- 유사 명령어 추천 기능 (레벤슈타인 거리 알고리즘)

### 4.2 명령어 레지스트리 (CommandRegistryService)

- 도메인별 명령어 등록 및 조회 기능
- 명령어 핸들러 관리
- 명령어 사용법 저장 및 조회
- 컨텍스트 기반 명령어 생성

### 4.3 명령어 실행기 (CommandExecutorService)

- 명령어 실행 및 결과 표준화
- 도메인 기반 명령어 라우팅
- 비동기 취소 기능
- 실행 이력 관리

## 5. 확장성 및 미래 방향

### 5.1 확장성 지원

- 플러그인 시스템과의 통합을 통한 새로운 도메인 추가
- 사용자 정의 명령어 지원
- 명령어 조합 및 자동화 기능

### 5.2 향후 개발 방향

- 자동 완성 UI 개선
- 도메인별 아이콘 및 색상 체계 구현
- 명령어 기반 대화 흐름 설계
- 더 많은 외부 시스템 연동 추가

## 6. 결론

도메인 기반 명령어 시스템은 APE 확장 프로그램의 핵심 기능으로, 개발자가 직관적으로 다양한 작업을 수행할 수 있게 합니다. 이중 접두사 체계와 도메인 기반 구조를 통해 내부 기능과 외부 시스템 연동을 명확히 구분하고, 확장성과 유연성을 크게 향상시켰습니다.

이번 개선을 통해 APE는 더욱 강력한 개발 도구로 발전했으며, 향후 더 많은 도메인별 기능을 추가할 수 있는 기반을 마련했습니다.